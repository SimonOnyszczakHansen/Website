<button id="button-back" (click)="goBack()" aria-label="Go back">
  <i class="fas fa-arrow-left"></i> Back
</button>

<nav id="table-of-contents" aria-label="Table of Contents">
  <h4>Contents</h4>
  <ul>
    <li>
      <button (click)="scrollToSection('section1')" [class.active]="activeSection === 'section1'">
        1. Introduction & Overview
      </button>
    </li>
    <li>
      <button (click)="scrollToSection('section2')" [class.active]="activeSection === 'section2'">
        2. How It Works
      </button>
    </li>
    <li>
      <button (click)="scrollToSection('section3')" [class.active]="activeSection === 'section3'">
        3. Usage & Extra Features
      </button>
    </li>
  </ul>
</nav>

<main>
  <h1>Details for {{ project?.title }}</h1>
  <div *ngIf="loading">Loading...</div>
  <div *ngIf="error">{{ error }}</div>

  <section id="section1" aria-labelledby="section1-heading" *ngIf="project">
    <h2 id="section1-heading"><span>1. Introduction & Overview</span></h2>
    <p>{{ project.sections.introduction }}</p>
    <img [src]="project.images.preview" alt="Password Generator Preview" class="image-preview" />
    <p><strong>Key highlights:</strong></p>
    <ul>
      <li>Add your own interests, favorite numbers, or colors.</li>
      <li>Dynamically enforces minimum password length and includes special characters.</li>
      <li>Language auto-detect (English or Danish).</li>
      <li>A built-in strength meter checks for weak patterns.</li>
      <li>Generates site-specific passwords by appending a portion of each website’s name.</li>
    </ul>
  </section>

  <section id="section2" aria-labelledby="section2-heading" *ngIf="project">
    <h2 id="section2-heading"><span>2. How It Works</span></h2>
    <p>{{ project.sections.howItWorks }}</p>
    <pre ngNonBindable>
      <code class="language-javascript">
        // Example from script.js
        function generateBasePassword(tags, charactersPerInterest, minLength) {{ '{' }}
          let basePasswordParts = [];
          let numbers = [];
          let nonNumberTags = [];
          let specialCharacterInserted = false;

          // Separate numeric vs. non-numeric tags
          tags.forEach(tag => {{ '{' }}
            if (!isNaN(tag)) {{ '{' }}
              numbers.push(tag);
            {{ '}' }} else {{ '{' }}
              nonNumberTags.push(tag);
            {{ '}' }}
          {{ '}' }});

          // Process each non-number tag
          nonNumberTags.forEach(tag => {{ '{' }}
            let segment = tag.substring(0, charactersPerInterest);

            // Insert a special character if needed
            if (!specialCharacterInserted) {{ '{' }}
              // Example logic for æ, ø, å conversion...
              specialCharacterInserted = true;
            {{ '}' }}

            // Capitalize first letter
            segment = segment.charAt(0).toUpperCase() + segment.slice(1);

            basePasswordParts.push(segment);

            // Insert one number after each tag if available
            if (numbers.length > 0) {{ '{' }}
              basePasswordParts.push(numbers.shift());
            {{ '}' }}
          {{ '}' }});

          // If no special character was used, add one at the end
          if (!specialCharacterInserted) {{ '{' }}
            basePasswordParts.push("!");
          {{ '}' }}

          return basePasswordParts.join("");
        {{ '}' }}
      </code>
    </pre>
  </section>

  <section id="section3" aria-labelledby="section3-heading" *ngIf="project">
    <h2 id="section3-heading"><span>3. Usage & Extra Features</span></h2>
    <p>{{ project.sections.usage }}</p>
    <img [src]="project.images.result" alt="Example of Generated Password" class="image-preview" />
  </section>
</main>